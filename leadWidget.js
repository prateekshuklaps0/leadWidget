class LoadWidget{constructor(e){this.widgetId=e,this.iframeLoaded=!1,this.init()}init(){document.addEventListener("DOMContentLoaded",()=>this.loadIframe());let e=new MutationObserver(()=>{this.iframeLoaded||this.loadIframe()});e.observe(document.body,{childList:!0,subtree:!0}),window.loadWidgetListener||(window.loadWidgetListener=!0,window.addEventListener("message",this.handleMessage))}loadIframe(){let e=document.getElementById(this.widgetId);if(!e||this.iframeLoaded)return;this.iframeLoaded=!0,e.setAttribute("frameBorder","0");let t=`https://admin-lead.mastersunion.org/widget/${this.widgetId}`,d=new URLSearchParams(window.location.search);d.append("widgetHostURL",window.location.href),d.append("parentReferrer",document.referrer||""),e.src=`${t}?${d.toString()}`}handleMessage(e){e.data?.type==="REDIRECT"&&e.data?.url&&(window.location.href=e.data.url)}}
